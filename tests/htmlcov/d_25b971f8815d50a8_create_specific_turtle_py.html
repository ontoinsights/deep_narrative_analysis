<!DOCTYPE html>
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Coverage for /Users/andreaw/Hold/deep_narrative_analysis/dna/create_specific_turtle.py: 66%</title>
    <link rel="icon" sizes="32x32" href="favicon_32.png">
    <link rel="stylesheet" href="style.css" type="text/css">
    <script type="text/javascript" src="coverage_html.js" defer></script>
</head>
<body class="pyfile">
<header>
    <div class="content">
        <h1>
            <span class="text">Coverage for </span><b>/Users/andreaw/Hold/deep_narrative_analysis/dna/create_specific_turtle.py</b>:
            <span class="pc_cov">66%</span>
        </h1>
        <aside id="help_panel_wrapper">
            <input id="help_panel_state" type="checkbox">
            <label for="help_panel_state">
                <img id="keyboard_icon" src="keybd_closed.png" alt="Show/hide keyboard shortcuts" />
            </label>
            <div id="help_panel">
                <p class="legend">Shortcuts on this page</p>
                <div class="keyhelp">
                    <p>
                        <kbd>r</kbd>
                        <kbd>m</kbd>
                        <kbd>x</kbd>
                        <kbd>p</kbd>
                        &nbsp; toggle line displays
                    </p>
                    <p>
                        <kbd>j</kbd>
                        <kbd>k</kbd>
                        &nbsp; next/prev highlighted chunk
                    </p>
                    <p>
                        <kbd>0</kbd> &nbsp; (zero) top of page
                    </p>
                    <p>
                        <kbd>1</kbd> &nbsp; (one) first highlighted chunk
                    </p>
                    <p>
                        <kbd>[</kbd>
                        <kbd>]</kbd>
                        &nbsp; prev/next file
                    </p>
                    <p>
                        <kbd>u</kbd> &nbsp; up to the index
                    </p>
                    <p>
                        <kbd>?</kbd> &nbsp; show/hide this help
                    </p>
                </div>
            </div>
        </aside>
        <h2>
            <span class="text">128 statements &nbsp;</span>
            <button type="button" class="run button_toggle_run" value="run" data-shortcut="r" title="Toggle lines run">101<span class="text"> run</span></button>
            <button type="button" class="mis show_mis button_toggle_mis" value="mis" data-shortcut="m" title="Toggle lines missing">27<span class="text"> missing</span></button>
            <button type="button" class="exc show_exc button_toggle_exc" value="exc" data-shortcut="x" title="Toggle lines excluded">0<span class="text"> excluded</span></button>
            <button type="button" class="par run show_par button_toggle_par" value="par" data-shortcut="p" title="Toggle lines partially run">26<span class="text"> partial</span></button>
        </h2>
        <p class="text">
            <a id="prevFileLink" class="nav" href="d_25b971f8815d50a8_create_noun_turtle_py.html">&#xab; prev</a> &nbsp; &nbsp;
            <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
            <a id="nextFileLink" class="nav" href="d_25b971f8815d50a8_create_verb_turtle_py.html">&#xbb; next</a>
            &nbsp; &nbsp; &nbsp;
            <a class="nav" href="https://coverage.readthedocs.io">coverage.py v6.5.0</a>,
            created at 2023-03-06 23:28 -0500
        </p>
        <aside class="hidden">
            <button type="button" class="button_next_chunk" data-shortcut="j"/>
            <button type="button" class="button_prev_chunk" data-shortcut="k"/>
            <button type="button" class="button_top_of_page" data-shortcut="0"/>
            <button type="button" class="button_first_chunk" data-shortcut="1"/>
            <button type="button" class="button_prev_file" data-shortcut="["/>
            <button type="button" class="button_next_file" data-shortcut="]"/>
            <button type="button" class="button_to_index" data-shortcut="u"/>
            <button type="button" class="button_show_hide_help" data-shortcut="?"/>
        </aside>
    </div>
</header>
<main id="source">
    <p class="pln"><span class="n"><a id="t1" href="#t1">1</a></span><span class="t"><span class="com"># Functions to clean up the Turtle (before storage in Stardog)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t2" href="#t2">2</a></span><span class="t"><span class="com"># Called by create_narrative_turtle.py</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t3" href="#t3">3</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t4" href="#t4">4</a></span><span class="t"><span class="key">from</span> <span class="nam">rdflib</span> <span class="key">import</span> <span class="nam">Graph</span> <span class="key">as</span> <span class="nam">RDFGraph</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t5" href="#t5">5</a></span><span class="t"><span class="key">import</span> <span class="nam">uuid</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t6" href="#t6">6</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t7" href="#t7">7</a></span><span class="t"><span class="key">from</span> <span class="nam">dna</span><span class="op">.</span><span class="nam">database</span> <span class="key">import</span> <span class="nam">query_class</span><span class="op">,</span> <span class="nam">query_database</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t8" href="#t8">8</a></span><span class="t"><span class="key">from</span> <span class="nam">dna</span><span class="op">.</span><span class="nam">queries</span> <span class="key">import</span> <span class="nam">query_if_subclass</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t9" href="#t9">9</a></span><span class="t"><span class="key">from</span> <span class="nam">dna</span><span class="op">.</span><span class="nam">query_ontology</span> <span class="key">import</span> <span class="nam">get_norp_emotion_or_lob</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t10" href="#t10">10</a></span><span class="t"><span class="key">from</span> <span class="nam">dna</span><span class="op">.</span><span class="nam">query_sources</span> <span class="key">import</span> <span class="nam">get_wikipedia_classification</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t11" href="#t11">11</a></span><span class="t"><span class="key">from</span> <span class="nam">dna</span><span class="op">.</span><span class="nam">utilities_and_language_specific</span> <span class="key">import</span> <span class="nam">dna_prefix</span><span class="op">,</span> <span class="nam">empty_string</span><span class="op">,</span> <span class="nam">ontologies_database</span><span class="op">,</span> <span class="nam">ttl_prefixes</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t12" href="#t12">12</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t13" href="#t13">13</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t14" href="#t14">14</a></span><span class="t"><span class="key">def</span> <span class="nam">_process_class_mapping</span><span class="op">(</span><span class="nam">class_map</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span> <span class="nam">indiv_iri</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span> <span class="nam">is_alt_coll</span><span class="op">:</span> <span class="nam">bool</span><span class="op">)</span> <span class="op">-></span> <span class="op">(</span><span class="nam">list</span><span class="op">,</span> <span class="nam">str</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t15" href="#t15">15</a></span><span class="t">    <span class="str">"""</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t16" href="#t16">16</a></span><span class="t"><span class="str">    Create the Turtle assigning a DNA class type (rdf:type) to an individual based on the class mapping</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t17" href="#t17">17</a></span><span class="t"><span class="str">    string. The individual is identified by the indiv_iri. The details in the class mapping may require</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t18" href="#t18">18</a></span><span class="t"><span class="str">    special handling - such as when a noun map indicates both a Person and an Event (which indicates that</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t19" href="#t19">19</a></span><span class="t"><span class="str">    the Person should be associated with an event of that type). For example, a 'civil servant' is</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t20" href="#t20">20</a></span><span class="t"><span class="str">    defined as 'urn:ontoinsights:dna:Person+urn:ontoinsights:dna:GovernmentAndPoliticsBusiness'.</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t21" href="#t21">21</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t22" href="#t22">22</a></span><span class="t"><span class="str">    Note that the association of context is only output when the mapping is for a noun that is the</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t23" href="#t23">23</a></span><span class="t"><span class="str">    object of the sentence.</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t24" href="#t24">24</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t25" href="#t25">25</a></span><span class="t"><span class="str">    :param class_map: A possible type definition for an individual</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t26" href="#t26">26</a></span><span class="t"><span class="str">    :param indiv_iri: A string/IRI identifying the individual</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t27" href="#t27">27</a></span><span class="t"><span class="str">    :param is_alt_coll: Boolean indicating that this processing is related to a collection of</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t28" href="#t28">28</a></span><span class="t"><span class="str">                        alternative mappings (an AlternativeCollection)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t29" href="#t29">29</a></span><span class="t"><span class="str">    :return: A tuple consisting of two entries - 1) a list of strings holding the Turtle representation</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t30" href="#t30">30</a></span><span class="t"><span class="str">             and 2) a possibly revised class_map string</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t31" href="#t31">31</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t32" href="#t32">32</a></span><span class="t">    <span class="nam">type_turtle</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t33" href="#t33">33</a></span><span class="t">    <span class="nam">revised_map</span> <span class="op">=</span> <span class="nam">class_map</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t34" href="#t34">34</a></span><span class="t">    <span class="key">if</span> <span class="str">'dna:Person+'</span> <span class="key">in</span> <span class="nam">class_map</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t35" href="#t35">35</a></span><span class="t">        <span class="key">for</span> <span class="nam">detail</span> <span class="key">in</span> <span class="nam">class_map</span><span class="op">.</span><span class="nam">split</span><span class="op">(</span><span class="str">'+'</span><span class="op">)</span><span class="op">:</span>  <span class="com"># Class names that define the type, '+' = multiple inheritance</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t36" href="#t36">36</a></span><span class="t">            <span class="key">if</span> <span class="str">':Person'</span> <span class="key">in</span> <span class="nam">detail</span> <span class="key">or</span> <span class="str">':Collection'</span> <span class="key">in</span> <span class="nam">detail</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t37" href="#t37">37</a></span><span class="t">                <span class="key">continue</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t38" href="#t38">38</a></span><span class="t">            <span class="key">if</span> <span class="str">':enum:Female'</span> <span class="key">in</span> <span class="nam">detail</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t39" href="#t39">39</a></span><span class="t">                <span class="nam">type_turtle</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{indiv_iri} :has_gender :enum:Female .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t40" href="#t40">40</a></span><span class="t">                <span class="nam">revised_map</span> <span class="op">=</span> <span class="nam">revised_map</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">f'+{dna_prefix}enum:Female'</span><span class="op">,</span> <span class="nam">empty_string</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t41" href="#t41">41</a></span><span class="t">                <span class="key">continue</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t42" href="#t42">42</a></span><span class="t">            <span class="key">elif</span> <span class="str">':enum:Male'</span> <span class="key">in</span> <span class="nam">detail</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t43" href="#t43">43</a></span><span class="t">                <span class="nam">type_turtle</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{indiv_iri} :has_gender :enum:Male .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t44" href="#t44">44</a></span><span class="t">                <span class="nam">revised_map</span> <span class="op">=</span> <span class="nam">revised_map</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">f'+{dna_prefix}enum:Male'</span><span class="op">,</span> <span class="nam">empty_string</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t45" href="#t45">45</a></span><span class="t">                <span class="key">continue</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t46" href="#t46">46</a></span><span class="t">            <span class="nam">revised_detail</span> <span class="op">=</span> <span class="nam">detail</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="nam">dna_prefix</span><span class="op">,</span> <span class="str">":"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t47" href="#t47">47</a></span><span class="t">            <span class="com"># TODO: Handle rdfs:comment contexts or aspects</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t48" href="#t48">48</a></span><span class="t">            <span class="key">if</span> <span class="str">'-or-'</span> <span class="key">in</span> <span class="nam">detail</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t49" href="#t49">49</a></span><span class="t">                <span class="nam">revised_map</span> <span class="op">=</span> <span class="nam">revised_map</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">f'+{detail}'</span><span class="op">,</span> <span class="nam">empty_string</span><span class="op">)</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="nam">detail</span><span class="op">,</span> <span class="nam">empty_string</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t50" href="#t50">50</a></span><span class="t">                <span class="nam">revised_detail</span> <span class="op">=</span> <span class="nam">revised_detail</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">'-or-'</span><span class="op">,</span> <span class="str">' or '</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t51" href="#t51">51</a></span><span class="t">                <span class="nam">type_turtle</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{indiv_iri} rdfs:comment "Business and/or Event contexts, {revised_detail}" .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t52" href="#t52">52</a></span><span class="t">                <span class="key">continue</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t53" href="#t53">53</a></span><span class="t">            <span class="key">if</span> <span class="nam">query_database</span><span class="op">(</span><span class="str">'select'</span><span class="op">,</span> <span class="nam">query_if_subclass</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">'urnClass'</span><span class="op">,</span> <span class="nam">detail</span><span class="op">)</span>&nbsp;</span><span class="r"><span class="annotate short">53&#x202F;&#x219B;&#x202F;56</span><span class="annotate long">line 53 didn't jump to line 56, because the condition on line 53 was never true</span></span></p>
    <p class="pln"><span class="n"><a id="t54" href="#t54">54</a></span><span class="t">                              <span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">'searchClass'</span><span class="op">,</span> <span class="str">'Interval'</span><span class="op">)</span><span class="op">,</span> <span class="nam">ontologies_database</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t55" href="#t55">55</a></span><span class="t">                <span class="com"># Check Interval (such as 'OldAge')</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t56" href="#t56">56</a></span><span class="t">                <span class="nam">revised_map</span> <span class="op">=</span> <span class="nam">revised_map</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">f'+{detail}'</span><span class="op">,</span> <span class="nam">empty_string</span><span class="op">)</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="nam">detail</span><span class="op">,</span> <span class="nam">empty_string</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t57" href="#t57">57</a></span><span class="t">                <span class="key">if</span> <span class="nam">is_alt_coll</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t58" href="#t58">58</a></span><span class="t">                    <span class="nam">type_turtle</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{indiv_iri} rdfs:comment "Agent aspect, {revised_detail} .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t59" href="#t59">59</a></span><span class="t">                <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t60" href="#t60">60</a></span><span class="t">                    <span class="nam">type_turtle</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{indiv_iri} :has_agent_aspect {revised_detail} .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t61" href="#t61">61</a></span><span class="t">                <span class="key">continue</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t62" href="#t62">62</a></span><span class="t">            <span class="key">if</span> <span class="nam">query_database</span><span class="op">(</span><span class="str">'select'</span><span class="op">,</span> <span class="nam">query_if_subclass</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">'urnClass'</span><span class="op">,</span> <span class="nam">detail</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t63" href="#t63">63</a></span><span class="t">                              <span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">'searchClass'</span><span class="op">,</span> <span class="str">'LineOfBusiness'</span><span class="op">)</span><span class="op">,</span> <span class="nam">ontologies_database</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t64" href="#t64">64</a></span><span class="t">                <span class="nam">revised_map</span> <span class="op">=</span> <span class="nam">revised_map</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">f'+{detail}'</span><span class="op">,</span> <span class="nam">empty_string</span><span class="op">)</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="nam">detail</span><span class="op">,</span> <span class="nam">empty_string</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t65" href="#t65">65</a></span><span class="t">                <span class="key">if</span> <span class="nam">is_alt_coll</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t66" href="#t66">66</a></span><span class="t">                    <span class="nam">type_turtle</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{indiv_iri} rdfs:comment "LineOfBusiness context, {revised_detail}" .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t67" href="#t67">67</a></span><span class="t">                <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t68" href="#t68">68</a></span><span class="t">                    <span class="nam">type_turtle</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{indiv_iri} :has_line_of_business {revised_detail} .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t69" href="#t69">69</a></span><span class="t">                <span class="key">continue</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t70" href="#t70">70</a></span><span class="t">            <span class="key">if</span> <span class="nam">query_database</span><span class="op">(</span><span class="str">'select'</span><span class="op">,</span> <span class="nam">query_if_subclass</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">'urnClass'</span><span class="op">,</span> <span class="nam">detail</span><span class="op">)</span>&nbsp;</span><span class="r"><span class="annotate short">70&#x202F;&#x219B;&#x202F;35</span><span class="annotate long">line 70 didn't jump to line 35, because the condition on line 70 was never false</span></span></p>
    <p class="pln"><span class="n"><a id="t71" href="#t71">71</a></span><span class="t">                              <span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">'searchClass'</span><span class="op">,</span> <span class="str">'EventAndState'</span><span class="op">)</span><span class="op">,</span> <span class="nam">ontologies_database</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t72" href="#t72">72</a></span><span class="t">                <span class="nam">revised_map</span> <span class="op">=</span> <span class="nam">revised_map</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">f'+{detail}'</span><span class="op">,</span> <span class="nam">empty_string</span><span class="op">)</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="nam">detail</span><span class="op">,</span> <span class="nam">empty_string</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t73" href="#t73">73</a></span><span class="t">                <span class="nam">type_turtle</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{indiv_iri} rdfs:comment "EventAndState context, {revised_detail}" .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t74" href="#t74">74</a></span><span class="t">                <span class="key">continue</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t75" href="#t75">75</a></span><span class="t">    <span class="key">if</span> <span class="nam">is_alt_coll</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t76" href="#t76">76</a></span><span class="t">        <span class="nam">type_turtle</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{indiv_iri} :has_member {revised_map.replace("+", ", ").replace(dna_prefix, ":")} .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t77" href="#t77">77</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t78" href="#t78">78</a></span><span class="t">        <span class="nam">type_turtle</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{indiv_iri} a {revised_map.replace("+", ", ").replace(dna_prefix, ":")} .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t79" href="#t79">79</a></span><span class="t">    <span class="key">return</span> <span class="nam">type_turtle</span><span class="op">,</span> <span class="nam">revised_map</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t80" href="#t80">80</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t81" href="#t81">81</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t82" href="#t82">82</a></span><span class="t"><span class="key">def</span> <span class="nam">cleanup_unused_turtle</span><span class="op">(</span><span class="nam">turtle</span><span class="op">:</span> <span class="nam">list</span><span class="op">)</span> <span class="op">-></span> <span class="nam">list</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t83" href="#t83">83</a></span><span class="t">    <span class="str">"""</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t84" href="#t84">84</a></span><span class="t"><span class="str">    Use rdflib to examine the Turtle statements, to determine if any IRIs that are triple subjects</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t85" href="#t85">85</a></span><span class="t"><span class="str">    are included, but are never referenced as objects. They are removed since they might be confusing</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t86" href="#t86">86</a></span><span class="t"><span class="str">    to a user reviewing a knowledge graph.</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t87" href="#t87">87</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t88" href="#t88">88</a></span><span class="t"><span class="str">    :param turtle: An array of the Turtle statements for a sentence/chunk</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t89" href="#t89">89</a></span><span class="t"><span class="str">    :return: The Turtle with any triples with a subject IRI that is not referenced as an object removed</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t90" href="#t90">90</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t91" href="#t91">91</a></span><span class="t">    <span class="nam">complete_turtle</span> <span class="op">=</span> <span class="nam">ttl_prefixes</span><span class="op">[</span><span class="op">:</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t92" href="#t92">92</a></span><span class="t">    <span class="nam">complete_turtle</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">turtle</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t93" href="#t93">93</a></span><span class="t">    <span class="nam">rdf_graph</span> <span class="op">=</span> <span class="nam">RDFGraph</span><span class="op">(</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t94" href="#t94">94</a></span><span class="t">    <span class="nam">graph</span> <span class="op">=</span> <span class="nam">rdf_graph</span><span class="op">.</span><span class="nam">parse</span><span class="op">(</span><span class="nam">data</span><span class="op">=</span><span class="str">' '</span><span class="op">.</span><span class="nam">join</span><span class="op">(</span><span class="nam">complete_turtle</span><span class="op">)</span><span class="op">,</span> <span class="nam">format</span><span class="op">=</span><span class="str">'text/turtle'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t95" href="#t95">95</a></span><span class="t">    <span class="nam">unused_iris</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t96" href="#t96">96</a></span><span class="t">    <span class="nam">subjects</span> <span class="op">=</span> <span class="op">[</span><span class="nam">subj</span> <span class="key">for</span> <span class="nam">subj</span> <span class="key">in</span> <span class="nam">graph</span><span class="op">.</span><span class="nam">subjects</span><span class="op">(</span><span class="nam">unique</span><span class="op">=</span><span class="key">True</span><span class="op">)</span> <span class="key">if</span> <span class="nam">subj</span><span class="op">.</span><span class="nam">startswith</span><span class="op">(</span><span class="str">'urn:'</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t97" href="#t97">97</a></span><span class="t">    <span class="nam">objects</span> <span class="op">=</span> <span class="op">[</span><span class="nam">obj</span> <span class="key">for</span> <span class="nam">obj</span> <span class="key">in</span> <span class="nam">graph</span><span class="op">.</span><span class="nam">objects</span><span class="op">(</span><span class="nam">unique</span><span class="op">=</span><span class="key">True</span><span class="op">)</span> <span class="key">if</span> <span class="nam">obj</span><span class="op">.</span><span class="nam">startswith</span><span class="op">(</span><span class="str">'urn:'</span><span class="op">)</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t98" href="#t98">98</a></span><span class="t">    <span class="key">for</span> <span class="nam">subj</span> <span class="key">in</span> <span class="nam">subjects</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">98&#x202F;&#x219B;&#x202F;102</span><span class="annotate long">line 98 didn't jump to line 102, because the loop on line 98 didn't complete</span></span></p>
    <p class="par run show_par"><span class="n"><a id="t99" href="#t99">99</a></span><span class="t">        <span class="key">if</span> <span class="nam">subj</span> <span class="key">not</span> <span class="key">in</span> <span class="nam">objects</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">99&#x202F;&#x219B;&#x202F;98</span><span class="annotate long">line 99 didn't jump to line 98, because the condition on line 99 was never false</span></span></p>
    <p class="run"><span class="n"><a id="t100" href="#t100">100</a></span><span class="t">            <span class="nam">unused_iris</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">subj</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t101" href="#t101">101</a></span><span class="t">    <span class="com"># Also check if a LoB, ideology, religion is referenced as an agent aspect AND as an object</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t102" href="#t102">102</a></span><span class="t">    <span class="nam">new_turtle</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t103" href="#t103">103</a></span><span class="t">    <span class="key">if</span> <span class="nam">unused_iris</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">103&#x202F;&#x219B;&#x202F;105,&nbsp;&nbsp; 103&#x202F;&#x219B;&#x202F;117</span><span class="annotate long">2 missed branches: 1) line 103 didn't jump to line 105, because the condition on line 103 was never true, 2) line 103 didn't jump to line 117, because the condition on line 103 was never false</span></span></p>
    <p class="pln"><span class="n"><a id="t104" href="#t104">104</a></span><span class="t">        <span class="com"># The Sentence reference is always 'unused'</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t105" href="#t105">105</a></span><span class="t">        <span class="key">if</span> <span class="key">not</span> <span class="op">(</span><span class="nam">len</span><span class="op">(</span><span class="nam">unused_iris</span><span class="op">)</span> <span class="op">==</span> <span class="num">1</span> <span class="key">and</span> <span class="str">':Sentence'</span> <span class="key">in</span> <span class="nam">str</span><span class="op">(</span><span class="nam">unused_iris</span><span class="op">[</span><span class="num">0</span><span class="op">]</span><span class="op">)</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t106" href="#t106">106</a></span><span class="t">            <span class="nam">new_turtle</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t107" href="#t107">107</a></span><span class="t">            <span class="key">for</span> <span class="nam">ttl</span> <span class="key">in</span> <span class="nam">turtle</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">107&#x202F;&#x219B;&#x202F;117</span><span class="annotate long">line 107 didn't jump to line 117, because the loop on line 107 didn't complete</span></span></p>
    <p class="run"><span class="n"><a id="t108" href="#t108">108</a></span><span class="t">                <span class="nam">found_unused</span> <span class="op">=</span> <span class="key">False</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t109" href="#t109">109</a></span><span class="t">                <span class="key">for</span> <span class="nam">unused</span> <span class="key">in</span> <span class="nam">unused_iris</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">109&#x202F;&#x219B;&#x202F;115</span><span class="annotate long">line 109 didn't jump to line 115, because the loop on line 109 didn't complete</span></span></p>
    <p class="par run show_par"><span class="n"><a id="t110" href="#t110">110</a></span><span class="t">                    <span class="key">if</span> <span class="str">':Sentence_'</span> <span class="key">in</span> <span class="nam">unused</span> <span class="key">or</span> <span class="str">'_Affiliation'</span> <span class="key">in</span> <span class="nam">unused</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">110&#x202F;&#x219B;&#x202F;112</span><span class="annotate long">line 110 didn't jump to line 112, because the condition on line 110 was never false</span></span></p>
    <p class="run"><span class="n"><a id="t111" href="#t111">111</a></span><span class="t">                        <span class="key">continue</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t112" href="#t112">112</a></span><span class="t">                    <span class="key">if</span> <span class="nam">ttl</span><span class="op">.</span><span class="nam">startswith</span><span class="op">(</span><span class="str">f':{str(unused.split(":")[-1])} '</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">112&#x202F;&#x219B;&#x202F;109,&nbsp;&nbsp; 112&#x202F;&#x219B;&#x202F;113</span><span class="annotate long">2 missed branches: 1) line 112 didn't jump to line 109, because the condition on line 112 was never false, 2) line 112 didn't jump to line 113, because the condition on line 112 was never true</span></span></p>
    <p class="run"><span class="n"><a id="t113" href="#t113">113</a></span><span class="t">                        <span class="nam">found_unused</span> <span class="op">=</span> <span class="key">True</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t114" href="#t114">114</a></span><span class="t">                        <span class="key">continue</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t115" href="#t115">115</a></span><span class="t">                <span class="key">if</span> <span class="key">not</span> <span class="nam">found_unused</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">115&#x202F;&#x219B;&#x202F;107,&nbsp;&nbsp; 115&#x202F;&#x219B;&#x202F;116</span><span class="annotate long">2 missed branches: 1) line 115 didn't jump to line 107, because the condition on line 115 was never false, 2) line 115 didn't jump to line 116, because the condition on line 115 was never true</span></span></p>
    <p class="run"><span class="n"><a id="t116" href="#t116">116</a></span><span class="t">                    <span class="nam">new_turtle</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">ttl</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t117" href="#t117">117</a></span><span class="t">    <span class="key">if</span> <span class="nam">new_turtle</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">117&#x202F;&#x219B;&#x202F;118,&nbsp;&nbsp; 117&#x202F;&#x219B;&#x202F;120</span><span class="annotate long">2 missed branches: 1) line 117 didn't jump to line 118, because the condition on line 117 was never true, 2) line 117 didn't jump to line 120, because the condition on line 117 was never false</span></span></p>
    <p class="run"><span class="n"><a id="t118" href="#t118">118</a></span><span class="t">        <span class="key">return</span> <span class="nam">new_turtle</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t119" href="#t119">119</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t120" href="#t120">120</a></span><span class="t">        <span class="key">return</span> <span class="nam">turtle</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t121" href="#t121">121</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t122" href="#t122">122</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t123" href="#t123">123</a></span><span class="t"><span class="key">def</span> <span class="nam">create_environment_ttl</span><span class="op">(</span><span class="nam">text</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span> <span class="nam">specific_class</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span> <span class="nam">subjects</span><span class="op">:</span> <span class="nam">list</span><span class="op">,</span> <span class="nam">event_iri</span><span class="op">:</span> <span class="nam">str</span><span class="op">)</span> <span class="op">-></span> <span class="nam">list</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t124" href="#t124">124</a></span><span class="t">    <span class="str">"""</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t125" href="#t125">125</a></span><span class="t"><span class="str">    Return the Turtle for a Person identified as a member of an organization (NORP), as having</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t126" href="#t126">126</a></span><span class="t"><span class="str">    an emotion or as involved in a line of business (LoB).</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t127" href="#t127">127</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t128" href="#t128">128</a></span><span class="t"><span class="str">    :param text: Specific text from the sentence that was used for the identification</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t129" href="#t129">129</a></span><span class="t"><span class="str">    :param specific_class: The most specific class in the DNA ontology to which the text was mapped</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t130" href="#t130">130</a></span><span class="t"><span class="str">    :param subjects: Array of tuples that are the subjects' texts, mappings, types and IRIs</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t131" href="#t131">131</a></span><span class="t"><span class="str">    :param event_iri: String holding the IRI of the Event being described/processed</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t132" href="#t132">132</a></span><span class="t"><span class="str">    :return: Appropriate Turtle statement given the input parameters</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t133" href="#t133">133</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t134" href="#t134">134</a></span><span class="t">    <span class="nam">new_ttl</span> <span class="op">=</span> <span class="op">[</span><span class="str">f'{event_iri} a {specific_class} ; rdfs:label "{text}" .'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t135" href="#t135">135</a></span><span class="t">    <span class="key">for</span> <span class="nam">subj_text</span><span class="op">,</span> <span class="nam">subj_type</span><span class="op">,</span> <span class="nam">subj_mappings</span><span class="op">,</span> <span class="nam">subj_iri</span> <span class="key">in</span> <span class="nam">subjects</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t136" href="#t136">136</a></span><span class="t">        <span class="nam">new_ttl</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{event_iri} :has_holder {subj_iri} .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t137" href="#t137">137</a></span><span class="t">    <span class="key">return</span> <span class="nam">new_ttl</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t138" href="#t138">138</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t139" href="#t139">139</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t140" href="#t140">140</a></span><span class="t"><span class="key">def</span> <span class="nam">create_metadata_ttl</span><span class="op">(</span><span class="nam">graph_id</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span> <span class="nam">narr_text</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span> <span class="nam">created_at</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t141" href="#t141">141</a></span><span class="t">                        <span class="nam">number_triples</span><span class="op">:</span> <span class="nam">int</span><span class="op">,</span> <span class="nam">narr_details</span><span class="op">:</span> <span class="nam">list</span><span class="op">)</span> <span class="op">-></span> <span class="nam">list</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t142" href="#t142">142</a></span><span class="t">    <span class="str">"""</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t143" href="#t143">143</a></span><span class="t"><span class="str">    Return the metadata Turtle for an ingested or updated narrative.</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t144" href="#t144">144</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t145" href="#t145">145</a></span><span class="t"><span class="str">    :param graph_id: The ID of the graph where the narrative is stored</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t146" href="#t146">146</a></span><span class="t"><span class="str">    :param narr_text: The complete narrative text</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t147" href="#t147">147</a></span><span class="t"><span class="str">    :param created_at: The time that the graph was created or updated</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t148" href="#t148">148</a></span><span class="t"><span class="str">    :param number_triples: Number of triples in the graph</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t149" href="#t149">149</a></span><span class="t"><span class="str">    :param narr_details: The metadata for the narrative - an array of strings indicating the</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t150" href="#t150">150</a></span><span class="t"><span class="str">                         author, publication date, publisher, source and title of the narrative</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t151" href="#t151">151</a></span><span class="t"><span class="str">    :return: An array of Turtle statements</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t152" href="#t152">152</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t153" href="#t153">153</a></span><span class="t">    <span class="nam">narr_text</span> <span class="op">=</span> <span class="nam">narr_text</span><span class="op">.</span><span class="nam">replace</span><span class="op">(</span><span class="str">'"'</span><span class="op">,</span> <span class="str">"'"</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t154" href="#t154">154</a></span><span class="t">    <span class="nam">turtle</span> <span class="op">=</span> <span class="op">[</span><span class="str">f'@prefix : &lt;urn:ontoinsights:dna:> .'</span><span class="op">,</span> <span class="str">'@prefix dc: &lt;http://purl.org/dc/terms/> .'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t155" href="#t155">155</a></span><span class="t">              <span class="str">f':{graph_id} a :KnowledgeGraph ; dc:created "{created_at}"^^xsd:dateTime ; '</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t156" href="#t156">156</a></span><span class="t">              <span class="str">f':number_triples {number_triples} ; :encodes :Narrative_{graph_id} .'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t157" href="#t157">157</a></span><span class="t">              <span class="str">f':Narrative_{graph_id} a :Narrative ; dc:creator "{narr_details[0]}" ; '</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t158" href="#t158">158</a></span><span class="t">              <span class="str">f'dc:publisher "{narr_details[2]}" ; dc:source "{narr_details[3]}" ; '</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t159" href="#t159">159</a></span><span class="t">              <span class="str">f'dc:title "{narr_details[4]}" .'</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t160" href="#t160">160</a></span><span class="t">              <span class="str">f':Narrative_{graph_id} :text "{narr_text}" .'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t161" href="#t161">161</a></span><span class="t">    <span class="key">if</span> <span class="nam">narr_details</span><span class="op">[</span><span class="num">1</span><span class="op">]</span> <span class="op">!=</span> <span class="str">'not defined'</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">161&#x202F;&#x219B;&#x202F;162,&nbsp;&nbsp; 161&#x202F;&#x219B;&#x202F;163</span><span class="annotate long">2 missed branches: 1) line 161 didn't jump to line 162, because the condition on line 161 was never true, 2) line 161 didn't jump to line 163, because the condition on line 161 was never false</span></span></p>
    <p class="run"><span class="n"><a id="t162" href="#t162">162</a></span><span class="t">        <span class="nam">turtle</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f':Narrative_{graph_id} dc:created "{narr_details[1]}"^^xsd:dateTime .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t163" href="#t163">163</a></span><span class="t">    <span class="key">return</span> <span class="nam">turtle</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t164" href="#t164">164</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t165" href="#t165">165</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t166" href="#t166">166</a></span><span class="t"><span class="key">def</span> <span class="nam">create_quotations_ttl</span><span class="op">(</span><span class="nam">graph_id</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span> <span class="nam">quotations</span><span class="op">:</span> <span class="nam">list</span><span class="op">,</span> <span class="nam">quot_dict</span><span class="op">:</span> <span class="nam">dict</span><span class="op">,</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t167" href="#t167">167</a></span><span class="t">                          <span class="nam">quotations_ttl</span><span class="op">:</span> <span class="nam">list</span><span class="op">,</span> <span class="nam">for_default_graph</span><span class="op">:</span> <span class="nam">bool</span><span class="op">)</span> <span class="op">-></span> <span class="nam">list</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t168" href="#t168">168</a></span><span class="t">    <span class="str">"""</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t169" href="#t169">169</a></span><span class="t"><span class="str">    Return the Turtle related to the quotations in a text - for the data to be added to</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t170" href="#t170">170</a></span><span class="t"><span class="str">    the meta_dna database (if for_meta_dna is True) or adding the detailed 'Quotation#'</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t171" href="#t171">171</a></span><span class="t"><span class="str">    text for the knowledge graph (if for_meta_dna is False).</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t172" href="#t172">172</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t173" href="#t173">173</a></span><span class="t"><span class="str">    :param graph_id: The ID of the graph where the narrative is stored</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t174" href="#t174">174</a></span><span class="t"><span class="str">    :param quotations: An array of quotations extracted from the original text</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t175" href="#t175">175</a></span><span class="t"><span class="str">    :param quot_dict: An array of quotation dictionaries (key = 'Quotation#' which is referenced</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t176" href="#t176">176</a></span><span class="t"><span class="str">                      in a chunk, and value = full quotation text) extracted from the original text</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t177" href="#t177">177</a></span><span class="t"><span class="str">    :param quotations_ttl: The current list of Turtle statements related to the quotations</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t178" href="#t178">178</a></span><span class="t"><span class="str">    :param for_default_graph: A boolean indicating whether this processing is for the default/</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t179" href="#t179">179</a></span><span class="t"><span class="str">                              meta-data graph of the repository</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t180" href="#t180">180</a></span><span class="t"><span class="str">    :return: An array of Turtle statements</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t181" href="#t181">181</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t182" href="#t182">182</a></span><span class="t">    <span class="com"># TODO: Quotation summary</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t183" href="#t183">183</a></span><span class="t">    <span class="nam">narr_iri</span> <span class="op">=</span> <span class="str">f':Narrative_{graph_id}'</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t184" href="#t184">184</a></span><span class="t">    <span class="key">if</span> <span class="nam">for_default_graph</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">184&#x202F;&#x219B;&#x202F;188</span><span class="annotate long">line 184 didn't jump to line 188, because the condition on line 184 was never false</span></span></p>
    <p class="par run show_par"><span class="n"><a id="t185" href="#t185">185</a></span><span class="t">        <span class="key">for</span> <span class="nam">quotation</span> <span class="key">in</span> <span class="nam">quotations</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">185&#x202F;&#x219B;&#x202F;190</span><span class="annotate long">line 185 didn't jump to line 190, because the loop on line 185 didn't complete</span></span></p>
    <p class="run"><span class="n"><a id="t186" href="#t186">186</a></span><span class="t">            <span class="nam">quotations_ttl</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{narr_iri} :text_quote "{quotation}" .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t187" href="#t187">187</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t188" href="#t188">188</a></span><span class="t">        <span class="key">for</span> <span class="nam">quote_numb</span><span class="op">,</span> <span class="nam">text</span> <span class="key">in</span> <span class="nam">quot_dict</span><span class="op">.</span><span class="nam">items</span><span class="op">(</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t189" href="#t189">189</a></span><span class="t">            <span class="nam">quotations_ttl</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f':{quote_numb} :text "{text}" .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t190" href="#t190">190</a></span><span class="t">    <span class="key">return</span> <span class="nam">quotations_ttl</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t191" href="#t191">191</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t192" href="#t192">192</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t193" href="#t193">193</a></span><span class="t"><span class="key">def</span> <span class="nam">create_type_turtle</span><span class="op">(</span><span class="nam">class_mappings</span><span class="op">:</span> <span class="nam">list</span><span class="op">,</span> <span class="nam">subj_iri</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span> <span class="nam">entity_text</span><span class="op">:</span> <span class="nam">str</span><span class="op">)</span> <span class="op">-></span> <span class="op">(</span><span class="nam">list</span><span class="op">,</span> <span class="nam">list</span><span class="op">)</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t194" href="#t194">194</a></span><span class="t">    <span class="str">"""</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t195" href="#t195">195</a></span><span class="t"><span class="str">    Create the Turtle assigning a DNA class type (rdf:type) to an individual. The individual is identified</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t196" href="#t196">196</a></span><span class="t"><span class="str">    by the subj_iri and the type(s) are identified by the class_mappings. Due to a word having multiple</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t197" href="#t197">197</a></span><span class="t"><span class="str">    possible meanings (which may be disambiguated in future code drops), a list of possible</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t198" href="#t198">198</a></span><span class="t"><span class="str">    class types are provided as input.</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t199" href="#t199">199</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t200" href="#t200">200</a></span><span class="t"><span class="str">    :param class_mappings: A list of possible types for an individual</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t201" href="#t201">201</a></span><span class="t"><span class="str">    :param subj_iri: A string/IRI identifying the individual</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t202" href="#t202">202</a></span><span class="t"><span class="str">    :param entity_text: A string holding the original text for the entity (noun or verb)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t203" href="#t203">203</a></span><span class="t"><span class="str">    :return: A tuple consisting of two arrays - 1) a list of strings holding the Turtle representation</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t204" href="#t204">204</a></span><span class="t"><span class="str">             and 2) a possibly revised class_mappings array</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t205" href="#t205">205</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t206" href="#t206">206</a></span><span class="t">    <span class="key">if</span> <span class="key">not</span> <span class="nam">class_mappings</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t207" href="#t207">207</a></span><span class="t">        <span class="key">return</span> <span class="op">[</span><span class="op">]</span><span class="op">,</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t208" href="#t208">208</a></span><span class="t">    <span class="nam">revised_mappings</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t209" href="#t209">209</a></span><span class="t">    <span class="nam">is_alt_coll</span> <span class="op">=</span> <span class="key">False</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t210" href="#t210">210</a></span><span class="t">    <span class="key">if</span> <span class="nam">len</span><span class="op">(</span><span class="nam">class_mappings</span><span class="op">)</span> <span class="op">></span> <span class="num">1</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">210&#x202F;&#x219B;&#x202F;214</span><span class="annotate long">line 210 didn't jump to line 214, because the condition on line 210 was never false</span></span></p>
    <p class="run"><span class="n"><a id="t211" href="#t211">211</a></span><span class="t">        <span class="nam">is_alt_coll</span> <span class="op">=</span> <span class="key">True</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t212" href="#t212">212</a></span><span class="t">        <span class="nam">ttl_list</span> <span class="op">=</span> <span class="op">[</span><span class="str">f'{subj_iri} a :AlternativeCollection ; :text "{entity_text}" .'</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t213" href="#t213">213</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t214" href="#t214">214</a></span><span class="t">        <span class="nam">ttl_list</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t215" href="#t215">215</a></span><span class="t">    <span class="key">for</span> <span class="nam">class_map</span> <span class="key">in</span> <span class="nam">class_mappings</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">215&#x202F;&#x219B;&#x202F;219</span><span class="annotate long">line 215 didn't jump to line 219, because the loop on line 215 didn't complete</span></span></p>
    <p class="run"><span class="n"><a id="t216" href="#t216">216</a></span><span class="t">        <span class="nam">new_ttl</span><span class="op">,</span> <span class="nam">new_map</span> <span class="op">=</span> <span class="nam">_process_class_mapping</span><span class="op">(</span><span class="nam">class_map</span><span class="op">,</span> <span class="nam">subj_iri</span><span class="op">,</span> <span class="nam">is_alt_coll</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t217" href="#t217">217</a></span><span class="t">        <span class="nam">revised_mappings</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="nam">new_map</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t218" href="#t218">218</a></span><span class="t">        <span class="nam">ttl_list</span><span class="op">.</span><span class="nam">extend</span><span class="op">(</span><span class="nam">new_ttl</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t219" href="#t219">219</a></span><span class="t">    <span class="key">return</span> <span class="nam">ttl_list</span><span class="op">,</span> <span class="nam">revised_mappings</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t220" href="#t220">220</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t221" href="#t221">221</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t222" href="#t222">222</a></span><span class="t"><span class="key">def</span> <span class="nam">create_verb_norp_ttl</span><span class="op">(</span><span class="nam">text_lemma</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span> <span class="nam">full_text</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span> <span class="nam">text_type</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span> <span class="nam">event_iri</span><span class="op">:</span> <span class="nam">str</span><span class="op">,</span> <span class="nam">ext_sources</span><span class="op">:</span> <span class="nam">bool</span><span class="op">)</span> <span class="op">-></span> <span class="nam">list</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t223" href="#t223">223</a></span><span class="t">    <span class="str">"""</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t224" href="#t224">224</a></span><span class="t"><span class="str">    Definition of the Turtle for sentence with the verb, "be", and an acomp or direct object - for</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t225" href="#t225">225</a></span><span class="t"><span class="str">    example, "I am angry."</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t226" href="#t226">226</a></span><span class="t">&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t227" href="#t227">227</a></span><span class="t"><span class="str">    :param text_lemma: String holding the acomp or direct object's lemma</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t228" href="#t228">228</a></span><span class="t"><span class="str">    :param full_text: String holding the acomp or direct object's full text</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t229" href="#t229">229</a></span><span class="t"><span class="str">    :param text_type: String holding the type of the text (e.g., 'PERSON', 'ADJ', 'PLURALNOUN', ...)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t230" href="#t230">230</a></span><span class="t"><span class="str">    :param event_iri: A string identifying the sentence verb's IRI</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t231" href="#t231">231</a></span><span class="t"><span class="str">    :param ext_sources: Boolean indicating if external data sources, such as Wikipedia, can be used</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t232" href="#t232">232</a></span><span class="t"><span class="str">    :return: An array defining the Turtle for the event</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t233" href="#t233">233</a></span><span class="t"><span class="str">    """</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t234" href="#t234">234</a></span><span class="t">    <span class="nam">norp_ttl</span> <span class="op">=</span> <span class="op">[</span><span class="op">]</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t235" href="#t235">235</a></span><span class="t">    <span class="nam">negated</span> <span class="op">=</span> <span class="key">True</span> <span class="key">if</span> <span class="nam">text_type</span><span class="op">.</span><span class="nam">startswith</span><span class="op">(</span><span class="str">'NEG'</span><span class="op">)</span> <span class="key">else</span> <span class="key">False</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t236" href="#t236">236</a></span><span class="t">    <span class="nam">norp_type</span><span class="op">,</span> <span class="nam">norp_class</span> <span class="op">=</span> <span class="nam">get_norp_emotion_or_lob</span><span class="op">(</span><span class="nam">text_lemma</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t237" href="#t237">237</a></span><span class="t">    <span class="key">if</span> <span class="key">not</span> <span class="nam">norp_type</span> <span class="key">and</span> <span class="nam">ext_sources</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">237&#x202F;&#x219B;&#x202F;240</span><span class="annotate long">line 237 didn't jump to line 240, because the condition on line 237 was never false</span></span></p>
    <p class="run"><span class="n"><a id="t238" href="#t238">238</a></span><span class="t">        <span class="nam">norp_type</span> <span class="op">=</span> <span class="nam">get_wikipedia_classification</span><span class="op">(</span><span class="nam">text_lemma</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t239" href="#t239">239</a></span><span class="t">        <span class="nam">norp_class</span> <span class="op">=</span> <span class="nam">norp_type</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t240" href="#t240">240</a></span><span class="t">    <span class="key">if</span> <span class="nam">norp_type</span> <span class="op">==</span> <span class="str">':LineOfBusiness'</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">240&#x202F;&#x219B;&#x202F;243</span><span class="annotate long">line 240 didn't jump to line 243, because the condition on line 240 was never false</span></span></p>
    <p class="par run show_par"><span class="n"><a id="t241" href="#t241">241</a></span><span class="t">        <span class="key">if</span> <span class="key">not</span> <span class="nam">negated</span><span class="op">:</span>   <span class="com"># If negated, then only know that the subject is NOT involved in a LoB; TODO: Handle</span>&nbsp;</span><span class="r"><span class="annotate short">241&#x202F;&#x219B;&#x202F;242,&nbsp;&nbsp; 241&#x202F;&#x219B;&#x202F;252</span><span class="annotate long">2 missed branches: 1) line 241 didn't jump to line 242, because the condition on line 241 was never true, 2) line 241 didn't jump to line 252, because the condition on line 241 was never false</span></span></p>
    <p class="mis show_mis"><span class="n"><a id="t242" href="#t242">242</a></span><span class="t">            <span class="nam">norp_ttl</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'subj :has_line_of_business {norp_class} ; :line_of_business "{full_text}" .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t243" href="#t243">243</a></span><span class="t">    <span class="key">elif</span> <span class="nam">norp_type</span> <span class="op">==</span> <span class="str">':EmotionalResponse'</span> <span class="key">or</span> <span class="key">not</span> <span class="nam">norp_type</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t244" href="#t244">244</a></span><span class="t">        <span class="nam">norp_ttl</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{event_iri} a :AttributeAndCharacteristic .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="par run show_par"><span class="n"><a id="t245" href="#t245">245</a></span><span class="t">        <span class="key">if</span> <span class="nam">negated</span><span class="op">:</span>&nbsp;</span><span class="r"><span class="annotate short">245&#x202F;&#x219B;&#x202F;247</span><span class="annotate long">line 245 didn't jump to line 247, because the condition on line 245 was never false</span></span></p>
    <p class="run"><span class="n"><a id="t246" href="#t246">246</a></span><span class="t">            <span class="nam">norp_ttl</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{event_iri} :negation true .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t247" href="#t247">247</a></span><span class="t">        <span class="nam">norp_ttl</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{event_iri} :has_holder subj .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t248" href="#t248">248</a></span><span class="t">        <span class="nam">norp_ttl</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'{event_iri} rdfs:label "Holder described as {full_text}" .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="pln"><span class="n"><a id="t249" href="#t249">249</a></span><span class="t">    <span class="key">else</span><span class="op">:</span>&nbsp;</span><span class="r"></span></p>
    <p class="mis show_mis"><span class="n"><a id="t250" href="#t250">250</a></span><span class="t">        <span class="key">if</span> <span class="key">not</span> <span class="nam">negated</span><span class="op">:</span>   <span class="com"># If negated, then only know that the subject does NOT have a certain aspect; TODO: Handle</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t251" href="#t251">251</a></span><span class="t">            <span class="nam">norp_ttl</span><span class="op">.</span><span class="nam">append</span><span class="op">(</span><span class="str">f'subj :has_agent_aspect {norp_class} ; :agent_aspect "{full_text}" .'</span><span class="op">)</span>&nbsp;</span><span class="r"></span></p>
    <p class="run"><span class="n"><a id="t252" href="#t252">252</a></span><span class="t">    <span class="key">return</span> <span class="nam">norp_ttl</span>&nbsp;</span><span class="r"></span></p>
</main>
<footer>
    <div class="content">
        <p>
            <a id="prevFileLink" class="nav" href="d_25b971f8815d50a8_create_noun_turtle_py.html">&#xab; prev</a> &nbsp; &nbsp;
            <a id="indexLink" class="nav" href="index.html">&Hat; index</a> &nbsp; &nbsp;
            <a id="nextFileLink" class="nav" href="d_25b971f8815d50a8_create_verb_turtle_py.html">&#xbb; next</a>
            &nbsp; &nbsp; &nbsp;
            <a class="nav" href="https://coverage.readthedocs.io">coverage.py v6.5.0</a>,
            created at 2023-03-06 23:28 -0500
        </p>
    </div>
</footer>
</body>
</html>
